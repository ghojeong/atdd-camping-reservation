# Top 3 인수 조건

## 1. 예약 생성 기능
**인수 조건**: "고객이 유효한 정보로 예약을 생성하면 6자리 확인코드와 함께 예약이 성공적으로 완료되어야 하며, 동시성 제어를 통해 중복 예약을 방지해야 한다"

**검증 포인트**:
- [ ] 유효한 고객 정보(이름, 전화번호)와 예약 정보로 예약 생성 시 201 Created 응답
- [ ] 6자리 영숫자 확인코드 자동 생성 및 반환
- [ ] 예약 상태가 'CONFIRMED'로 설정
- [ ] 30일 초과 예약 시도 시 400 Bad Request 응답
- [ ] 과거 날짜 예약 시도 시 400 Bad Request 응답
- [ ] 필수 정보 누락 시 적절한 검증 오류 메시지 반환
- [ ] 동일 사이트/날짜에 동시 예약 요청 시 하나만 성공 (409 Conflict)

## 2. 연박 예약 기능
**인수 조건**: "연박 예약 시 시작일부터 종료일까지 전체 기간의 가용성을 확인하여 모든 날짜가 예약 가능할 때만 예약이 성공해야 한다"

**검증 포인트**:
- [ ] 3박 4일 연박 예약 요청 시 전체 기간 가용성 확인
- [ ] 연박 기간 중 일부 날짜가 이미 예약된 경우 409 Conflict 응답
- [ ] "해당 기간에 예약이 불가능합니다" 오류 메시지 반환
- [ ] 연박 예약 성공 시 시작일부터 종료일까지 모든 날짜에 예약 생성
- [ ] 취소된 예약이 있는 날짜는 연박 예약 시 가용한 것으로 처리

## 3. 동시성 제어 기능
**인수 조건**: "동일한 사이트의 동일한 기간에 대해 여러 예약 요청이 동시에 발생해도 단 하나의 예약만 성공하고 나머지는 실패해야 한다"

**검증 포인트**:
- [ ] 동시에 발생한 중복 예약 요청 중 하나만 201 Created 응답
- [ ] 나머지 예약 요청은 409 Conflict 응답
- [ ] "이미 예약된 기간입니다" 오류 메시지 반환
- [ ] 트랜잭션 격리 수준을 통한 데이터 일관성 보장
- [ ] 취소된 예약(CANCELLED 상태)은 중복 체크에서 제외
